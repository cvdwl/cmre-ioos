<catalog xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://www.unidata.ucar.edu/namespaces/thredds/InvCatalog/v1.0 http://www.unidata.ucar.edu/schemas/thredds/InvCatalog.1.0.4.xsd"
 xmlns="http://www.unidata.ucar.edu/namespaces/thredds/InvCatalog/v1.0"
 xmlns:xlink="http://www.w3.org/1999/xlink" name="OPeNDAP Data Server" version="1.0.3">
 <service name="allServices" serviceType="Compound" base="">
  <service name="ncdods" serviceType="OPENDAP" base="/thredds/dodsC/"/>
  <service name="ncss" serviceType="NetcdfSubset" base="/thredds/ncss/grid/"/>
  <service name="wms" serviceType="WMS" base="/thredds/wms/"/>
  <service name="iso" serviceType="ISO" base="/thredds/iso/"/>
  <service name="ncml" serviceType="NCML" base="/thredds/ncml/"/>
  <service name="uddc" serviceType="UDDC" base="/thredds/uddc/"/>

 </service>


   <featureCollection name="cmre_roms" featureType="FMRC" harvest="true" path="cmre_roms/fmrc">
    <metadata inherited="true">
     <documentation type="summary">ROMS Output from CMRE ROMS</documentation>
     <serviceName>allServices</serviceName>
    </metadata>
    <collection spec="/storage/data/geos3/REP14/data/NURC/oceanmod/ROMS/native/.*REF_72h_his.nc$" 
                name="cmre_roms" 
                recheckAfter="15 min"
                dateFormatMark="#roms_#yyyyMMdd" 
                olderThan="6 min"/>

    <update startup="true" rescan="0 34 4-5 * * ? *" trigger="allow"/>

    <protoDataset choice="Penultimate">
     <netcdf xmlns="http://www.unidata.ucar.edu/namespaces/netcdf/ncml-2.2">

     <attribute name="title" value="REP14:CMRE:ROMS:Free-Run (native grid)"/>
     <attribute name="summary" value="Insert blurb from final report.  "/>

     </netcdf>
    </protoDataset>

    <fmrcConfig regularize="False" datasetTypes="Best"/>

 <netcdf xmlns="http://www.unidata.ucar.edu/namespaces/netcdf/ncml-2.2">
     <variable name="zeta">
      <attribute name="standard_name" value="sea_surface_height"/>
     </variable>
     <variable name="salt">
      <attribute name="standard_name" value="sea_water_salinity"/>
     </variable>
     <variable name="temp">
      <attribute name="standard_name" value="sea_water_potential_temperature"/>
     </variable>
     <variable name="u">
      <attribute name="standard_name" value="eastward_sea_water_velocity"/>
     </variable>
     <variable name="v">
      <attribute name="standard_name" value="northward_sea_water_velocity"/>
     </variable>
    </netcdf>

   </featureCollection>



   <featureCollection name="cmre_roms_regular" featureType="FMRC" harvest="true" path="cmre_roms_regular/fmrc">
    <metadata inherited="true">
     <documentation type="summary">ROMS Output from CMRE ROMS (regular grid)</documentation>
     <serviceName>allServices</serviceName>
    </metadata>
    <collection spec="/storage/data/geos3/REP14/data/NURC/oceanmod/ROMS/regular/.*REF_72h_his_regular.nc$" 
                name="cmre_roms_regular" 
                recheckAfter="15 min"
                dateFormatMark="#roms_#yyyyMMdd" 
                olderThan="6 min"/>

    <update startup="true" rescan="0 34 4-5 * * ? *" trigger="allow"/>


    <protoDataset choice="Penultimate">
     <netcdf xmlns="http://www.unidata.ucar.edu/namespaces/netcdf/ncml-2.2">

     <attribute name="title" value="REP14:CMRE:ROMS:Free-Run (regular grid)"/>
     <attribute name="summary" value="During the entire sea trial, CMRE implemented a limited­area configuration of the Regional Ocean Modeling System (ROMS). ROMS is a primitive­equation, finite­difference, hydro ­ static and free­surface model using generalized terrain­following s­coordinates. The  ROMS domain covers the Sardinian Sea with four open boundaries located  at  6.52°E  (west) , 8.58°E (east), 38.6°N  (south),  and 40.94°N  (north). The horizontal resolution is 1.5km,  and the vertical grid is composed of 32 s­levels. The momentum, heat and freshwater fluxes at the surface are computed  from COSMO­ME. Open boundary conditions are applied to tracers and baroclinic velocity with radiation and nudging. The free surface boundary conditions use the method of Chapman implicit while the depth­integrated boundary condition use the method of Flather. External values at the open boundaries were provided by daily averages of  the  larger scale MFS model.  ROMS  was initialized on 1 March 2014 using an analysis field from MFS model. Since then, it has been run in forecast mode once a day at 08:00 CEST without data assimilation, with output data every three hours and a forecast range of 72 hours. The results in this regular grid dataset were interpolated to from the native ROMS stretched vertical coordinates to uniform z levels. "/> 

     </netcdf>
    </protoDataset>
    <fmrcConfig regularize="False" datasetTypes="Best"/>

 <netcdf xmlns="http://www.unidata.ucar.edu/namespaces/netcdf/ncml-2.2">
     <variable name="time">
      <attribute name="units" value="days since -0001-12-31 00:00"/>
     </variable>
     <variable name="longitude">
      <attribute name="units" value="degrees_east"/>
     </variable>
     <variable name="latitude">
      <attribute name="units" value="degrees_north"/>
     </variable>
     <variable name="depth">
      <attribute name="units" value="m"/>
      <attribute name="positive" value="down"/>
     </variable>
     <variable name="zeta">
      <attribute name="standard_name" value="sea_surface_height"/>
     </variable>
     <variable name="salinity">
      <attribute name="standard_name" value="sea_water_salinity"/>
     </variable>
     <variable name="temperature">
      <attribute name="standard_name" value="sea_water_potential_temperature"/>
     </variable>
     <variable name="u">
      <attribute name="standard_name" value="eastward_sea_water_velocity"/>
     </variable>
     <variable name="v">
      <attribute name="standard_name" value="northward_sea_water_velocity"/>
     </variable>
    </netcdf>

   </featureCollection>


   <featureCollection name="socib_roms" featureType="FMRC" harvest="true" path="socib_roms/fmrc">
    <metadata inherited="true">
     <serviceName>allServices</serviceName>
    </metadata>
    <collection spec="/storage/data/geos3/REP14/data/NURC/oceanmod/ROMS_WMOP_SOCIB/.*_72h_his_regular\.nc$" 
                name="socib_roms" 
                recheckAfter="15 min"
                dateFormatMark="#REP14_#yyyyMMdd" 
                olderThan="6 min"/>

    <update startup="true" rescan="0 34 4-5 * * ? *" trigger="allow"/>

    <protoDataset choice="Penultimate">
     <netcdf xmlns="http://www.unidata.ucar.edu/namespaces/netcdf/ncml-2.2">

     <attribute name="title" value="REP14:SOCIB:WMOP"/>
     <attribute name="summary" value="Insert blurb from data report here. "/>

     </netcdf>
    </protoDataset>

    <fmrcConfig regularize="False" datasetTypes="Best"/>

 <netcdf xmlns="http://www.unidata.ucar.edu/namespaces/netcdf/ncml-2.2">
     <variable name="time">
      <attribute name="units" value="days since -0001-12-31 00:00"/>
     </variable>
     <variable name="longitude">
      <attribute name="units" value="degrees_east"/>
     </variable>
     <variable name="latitude">
      <attribute name="units" value="degrees_north"/>
     </variable>
     <variable name="depth">
      <attribute name="units" value="m"/>
      <attribute name="positive" value="down"/>
     </variable>
     <variable name="salinity">
      <attribute name="units" value="0.001"/>
      <attribute name="standard_name" value="sea_water_salinity"/>
     </variable>
     <variable name="temperature">
      <attribute name="units" value="Celcius"/>
      <attribute name="standard_name" value="sea_water_potential_temperature"/>
     </variable>
     <variable name="ssh">
      <attribute name="standard_name" value="sea_surface_height"/>
     </variable>
     <variable name="u">
      <attribute name="standard_name" value="eastward_sea_water_velocity"/>
     </variable>
     <variable name="v">
      <attribute name="standard_name" value="northward_sea_water_velocity"/>
     </variable>
    </netcdf>
   </featureCollection>


   <featureCollection name="mercator" featureType="FMRC" harvest="true" path="mercator/fmrc">
    <metadata inherited="true">
     <documentation type="summary">Mercator Output </documentation>
     <serviceName>allServices</serviceName>
    </metadata>
    <collection spec="/storage/data/geos3/REP14/data/NURC/oceanmod/Mercator/REP14.*\.nc$" 
                name="mercator" 
                recheckAfter="15 min"
                dateFormatMark="#REP14_#yyyyMMdd" 
                olderThan="6 min"/>

    <update startup="true" rescan="0 34 4-5 * * ? *" trigger="allow"/>
    <fmrcConfig regularize="False" datasetTypes="Best"/>

    <protoDataset choice="Penultimate">
     <netcdf xmlns="http://www.unidata.ucar.edu/namespaces/netcdf/ncml-2.2">
     <attribute name="title" value="REP14:Mercator"/>
     <attribute name="summary" value="insert blurb from cruise report"/>
     </netcdf>
    </protoDataset>

   <netcdf xmlns="http://www.unidata.ucar.edu/namespaces/netcdf/ncml-2.2">
     <variable name="ssh">
      <attribute name="standard_name" value="sea_surface_height"/>
     </variable>
    </netcdf>
   </featureCollection>

   <featureCollection name="mfs" featureType="FMRC" harvest="true" path="mfs/fmrc">
    <metadata inherited="true">
     <documentation type="summary">MFS Output </documentation>
     <serviceName>allServices</serviceName>
    </metadata>
    <collection spec="/data/storage/data/geos3/REP14/data/NURC/oceanmod/MFS/merged/REP14.*\.nc$" name="mfs" recheckAfter="15 min" dateFormatMark="#REP14_#yyyyMMdd" olderThan="6 min"/>

    <update startup="true" rescan="0 39 4-5 * * ? *" trigger="allow"/>
    <fmrcConfig regularize="False" datasetTypes="Best"/>

    <protoDataset choice="Penultimate">
     <netcdf xmlns="http://www.unidata.ucar.edu/namespaces/netcdf/ncml-2.2">
       <attribute name="title" value="REP14:MFS"/>
       <attribute name="summary" value="insert blurb from data report here. "/>
     </netcdf>
    </protoDataset>
   </featureCollection>


   <featureCollection name="nrl" featureType="FMRC" harvest="true" path="nrl/fmrc">
    <metadata inherited="true">
     <documentation type="summary">NRL Output </documentation>
     <serviceName>allServices</serviceName>
    </metadata>
    <collection spec="/storage/data/geos3/REP14/data/NURC/oceanmod/NRL/med_3km.*\.nc$" 
                name="nrl" 
                recheckAfter="15 min"
                dateFormatMark="#med_3km_#yyyyMMdd" 
                olderThan="6 min"/>

    <update startup="true" rescan="0 34 4-5 * * ? *" trigger="allow"/>

    <fmrcConfig regularize="False" datasetTypes="Best"/>

    <netcdf xmlns="http://www.unidata.ucar.edu/namespaces/netcdf/ncml-2.2">
     <remove type="variable" name="tau"/>

     <variable name="surf_el">
      <attribute name="standard_name" value="sea_surface_height"/>
     </variable>
     <variable name="salinity">
      <attribute name="standard_name" value="sea_water_salinity"/>
     </variable>
     <variable name="water_temp">
      <attribute name="standard_name" value="sea_water_potential_temperature"/>
     </variable>
     <variable name="water_u">
      <attribute name="standard_name" value="eastward_sea_water_velocity"/>
     </variable>
     <variable name="water_v">
      <attribute name="standard_name" value="northward_sea_water_velocity"/>
     </variable>
    </netcdf>
   </featureCollection>

 <catalogRef xlink:href="http://thredds.socib.es/thredds/catalog/operational_models/oceanographical/hydrodynamics/model_run_aggregation/wmopv2/catalog.xml" xlink:title="SOCIB:WMOPV2" name=""/>
</catalog>

